\NeedsTeXFormat{LaTeX2e} %[1995/12/01]
\ProvidesPackage{fipy}
	     [2004/10/07 Document style (FiPy manual)]

% Put Part as topmost level in PDF bookmarks
\def\tocPDFlevel{-1}
\DeclareOption{tocAsPDFpart}{\def\tocPDFlevel{-1}}
\DeclareOption{tocAsPDFchapter}{\def\tocPDFlevel{0}}
\ProcessOptions

% Use epydoc base class to format module documentation
\RequirePackage[index]{epydoc}

% \usepackage[text={7in,9.333in}]{geometry}

% \RequirePackage{geometry}

\RequirePackage{crop}

% \RequirePackage{alltt, parskip, fancyhdr, boxedminipage}
% \RequirePackage{multirow, longtable, makeidx, amssymb} 

% \RequirePackage[other]{tocbibind}
\tocotherhead{part}
\setlength{\columnsep}{35pt}

\RequirePackage{amsmath} 

\DeclareMathOperator{\erf}{erf}

% \usepackage[dvips, pagebackref, pdftitle={FiPy}, pdfcreator={epydoc 2.1}, bookmarks=true, bookmarksopen=false, pdfpagemode=UseOutlines, colorlinks=true, linkcolor=black, anchorcolor=black, citecolor=black, filecolor=black, menucolor=black, pagecolor=black, urlcolor=darkblue]{hyperref}
\RequirePackage[urlcolor=blue,linkcolor=blue,bookmarksopen,bookmarksopenlevel=2,pdftex,pagebackref,pdftitle={FiPy}, pdfcreator={epydoc 2.1}, bookmarks=true, bookmarksopen=false, pdfpagemode=UseOutlines,colorlinks=true,plainpages=false,pdfpagelabels]{hyperref}

% Give a mini-table-of-contents for each part
\RequirePackage{minitoc}
% \setcounter{tocdepth}{0}
\setcounter{parttocdepth}{1}
% minitoc.sty doesn't show the page number of a part's TOC, which
% looks weird.
\renewcommand{\thispageparttocstyle}{\thispagestyle{plain}}

% minitoc.sty uses archaic font selectors
\@ifundefined{chapter}{%
\def\ptcfont{\small\rmfamily}    % font for the parttoc
\def\ptcSfont{\small\bfseries}   % font for the parttoc (sections)
\def\ptifont{\large\bfseries}    % font for titles
}{%
\def\ptcfont{\normalsize\rmfamily}    % font for the parttoc
\def\ptcCfont{\normalsize\bfseries}   % font for the parttoc (chapters)
\def\ptcSfont{\normalsize\rmfamily}   % font for the parttoc (sections)
\def\ptifont{\Huge\bfseries}     % font for titles
}

\RequirePackage[ascii]{inputenc}

% \usepackage{fullpage}
%\usepackage[headings]{fullpage}
% \makeindex
\RequirePackage[usenames]{color}
\definecolor{darkblue}{rgb}{0,0.05,0.35}
\definecolor{redish}{rgb}{0.894,0.122,0.122}
\definecolor{bluish}{rgb}{0.216,0.188,0.533}
\RequirePackage{graphicx}

% \usepackage{nameref}

\graphicspath{{../figures/},{images/}}

% for reStructuredText
\RequirePackage{shortvrb}
\RequirePackage{tabularx}
\setlength{\extrarowheight}{2pt}
\newlength{\admonitionwidth}
\setlength{\admonitionwidth}{0.9\textwidth}
\newlength{\docinfowidth}
\setlength{\docinfowidth}{0.9\textwidth}
\newlength{\locallinewidth}
\newcommand{\optionlistlabel}[1]{\bf #1 \hfill}
\newenvironment{optionlist}[1]
{\begin{list}{}
  {\setlength{\labelwidth}{#1}
   \setlength{\rightmargin}{1cm}
   \setlength{\leftmargin}{\rightmargin}
   \addtolength{\leftmargin}{\labelwidth}
   \addtolength{\leftmargin}{\labelsep}
   \renewcommand{\makelabel}{\optionlistlabel}}
}{\end{list}}
% begin: floats for footnotes tweaking.
% % % \setlength{\floatsep}{0.5em}
% % % \setlength{\textfloatsep}{\fill}
% % % \addtolength{\textfloatsep}{3em}
% % % \renewcommand{\textfraction}{0.5}
% % % \renewcommand{\topfraction}{0.5}
% % % \renewcommand{\bottomfraction}{0.5}
\setcounter{totalnumber}{50}
\setcounter{topnumber}{50}
\setcounter{bottomnumber}{50}
% end floats for footnotes
% some commands, that could be overwritten in the style file.
\newcommand{\rubric}[1]{\subsection*{~\hfill {\it #1} \hfill ~}}
\newcommand{\titlereference}[1]{\textsl{#1}}


\newcommand{\logo}{\rotatebox{4}{\textcolor{redish}{\( \varphi \)}}\kern-.70em\raisebox{-.15em}{\textcolor{bluish}{\( \pi\)}}}
% \newcommand{\logoToo}{\raisebox{-.15em}{\textcolor{bluish}{\(\pi\)}}\kern-.64em\rotatebox{4}{\textcolor{redish}{\( \varphi \)}}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% reformat the TOC
\renewcommand*\l@section{\@dottedtocline{1}{1.5em}{3.3em}}
\renewcommand*\l@subsection{\@dottedtocline{2}{3.8em}{4.2em}}
\renewcommand*\l@subsubsection{\@dottedtocline{3}{7.0em}{5.1em}}
\renewcommand*\l@paragraph{\@dottedtocline{4}{10em}{6em}}
\renewcommand*\l@subparagraph{\@dottedtocline{5}{12em}{7em}}

% \usepackage{layout}

% \RequirePackage{tocvsec2}

\input{version}

% \setlength{\fboxrule}{2\fboxrule}
% \newlength{\BCL} % base class length, for base trees.

% \pagestyle{Ruled}
\renewcommand{\sectionmark}[1]{\markboth{#1}{}}
\renewcommand{\subsectionmark}[1]{\markright{#1}}

% \fancyhead{}
% \fancyhead[LO]{\slshape \rightmark}
% \fancyhead[RE]{\slshape \leftmark}
% \fancyhead[LE,RO]{\thepage}
% \fancyfoot{}

\copypagestyle{fipy}{Ruled}
\makeevenhead{fipy}{\thepage}{}{\slshape\leftmark}
\makeoddhead{fipy}{\slshape\rightmark}{}{\thepage}
\makeevenfoot{fipy}{}{}{}
\makeoddfoot{fipy}{}{}{}
% \makeheadrule{fipy}{\pagewidth}{\normalrulethickness}

% \aliaspagestyle{fipy}{Ruled}
\pagestyle{fipy}

% \newenvironment{Ventry}[1]%
%   {\begin{list}{}{%
%     \renewcommand{\makelabel}[1]{\texttt{##1:}\hfil}%
%     \settowidth{\labelwidth}{\texttt{#1:}}%
%     \setlength{\leftmargin}{\labelsep}%
%     \addtolength{\leftmargin}{\labelwidth}}}%
%   {\end{list}}

\newsavebox{\NISTbox}
\sbox{\NISTbox}{\includegraphics[trim=5 2 5 5,scale=1.5]{NIST_right2line}}
%\newlength{\photoheight}
%\settoheight{\photoheight}{\usebox{\photobox}}
%\newlength{\photowidth}
%\settowidth{\photowidth}{\usebox{\photobox}}

\newenvironment{changemargin}[2]{%
 \begin{list}{}{%
  \setlength{\topsep}{0pt}%
  \setlength{\leftmargin}{#1}%
  \setlength{\rightmargin}{#2}%
  \setlength{\listparindent}{\parindent}%
  \setlength{\itemindent}{\parindent}%
  \setlength{\parsep}{\parskip}%
 }%
\item[]}{\end{list}}

\renewcommand\tableofcontents{%
    \if@twocolumn
      \@restonecoltrue\onecolumn
    \else
      \@restonecolfalse
    \fi
    \chapter*{\contentsname\pdfbookmark[\tocPDFlevel]{Contents}{contents}
	\@mkboth{%
	   \MakeUppercase\contentsname}{\MakeUppercase\contentsname}}%
    \@starttoc{toc}%
    \if@restonecol\twocolumn\fi
    }

\newcommand*{\ps@mytitlepage}{%
  \let\@oddhead\@empty
  \renewcommand*{\@oddfoot}{%
  \rule{6.4in}{0in}\raisebox{-0.6in}{\parbox[b][0pt]{0pt}{\makebox[0pt][r]{\usebox{\NISTbox}}}}}}%\vspace*{-0.5in}}

\copypagestyle{titlingpage}{empty} 
\makeoddfoot{titlingpage}{}{}{\rule{6.4in}{0in}\raisebox{-0.6in}{\parbox[b][0pt]{0pt}{\makebox[0pt][r]{\usebox{\NISTbox}}}}}
% \makeevenfoot{titlingpage}{}{}{\usebox{\NISTbox}}

% \def\@makeauthor{\begingroup
% \renewcommand{\and}{\\}
% \begin{tabular}[t]{r@{}}%
%     \@author
% \end{tabular}
% \endgroup
% }

\def\@makeaffiliation{\begingroup
\renewcommand{\and}{\\}
\textit{
\begin{tabular}[t]{r@{}}%
    \@affiliation
\end{tabular}}
\endgroup
}

\def\subtitle#1{\gdef\@subtitle{#1}}
\def\@subtitle{}
\def\affiliation#1{\begingroup
\renewcommand{\and}{\\}
\gdef\@affiliation{#1}
\endgroup
}
\def\@affiliation{}

\renewcommand{\maketitlehooka}{%
    \begin{changemargin}{-1in}{-0.5in}%
    \let\footnotesize\small%
    \let\footnoterule\relax%
    \let \footnote \thanks%
    \begin{flushright}%
      \vspace*{-0.6in}
      \scalebox{10}{\logo}\par
      \vskip 3em%
    \end{flushright}
}

\pretitle{\begin{flushright}\Huge}
\posttitle{\par\end{flushright}}

\renewcommand{\maketitlehookb}{%
\begin{flushright}
\huge \@subtitle \par
\end{flushright}
\vskip 3em%
}

\preauthor{\begin{flushright}%
\renewcommand*{\andnext}{\\}%
\large\lineskip 0.75em% 
\begin{tabular}[t]{r@{}}} 
\postauthor{\end{tabular}\par\end{flushright}} 

\renewcommand{\maketitlehookc}{%
\begin{flushright}
\par \@makeaffiliation \par%
\end{flushright}
\vskip 1.5em%
}
 
\predate{\begin{flushright}\large}
\postdate{\par\end{flushright}}

\renewcommand{\maketitlehookd}{%
\vskip 1.5em%
\begin{flushright}
{\large Version~\Version \par}
\vspace*{\fill}
% \rule{6.4in}{0in}\raisebox{-0.6in}{\parbox[b][0pt]{0pt}{\makebox[0pt][r]{\usebox{\NISTbox}}}}
% \raisebox{-0.6in}{\parbox[b][0pt]{0pt}{\makebox[0pt][r]{\usebox{\NISTbox}}}}
\end{flushright}
\end{changemargin}
}

% \renewcommand{\maketitle}{%
% \begin{titlepage}%
% \thispagestyle{mytitlepage}
% \begin{changemargin}{-1in}{-0.5in}
% \let\footnotesize\small
% \let\footnoterule\relax
% \let \footnote \thanks
% \begin{flushright}%
%   \vspace*{-0.6in}
%   \scalebox{10}{\logo}\par
%   \vskip 3em%
%   {\Huge \@title \par}%
%   {\huge \@subtitle \par}%
%   \vskip 3em%
%   {\large
%    \lineskip .75em%
%    \@makeauthor \par
%    \@makeaffiliation \par }%
%     \vskip 1.5em%
%   {\large \@date \par}%       % Set date in \large size.
%       \vskip 1.5em%
%   {\large Version~\Version \par}
%   \vspace*{\fill}%
% \end{flushright}%
% \end{changemargin}%
% \end{titlepage}%
% }

\newcommand{\@Code}[1]{\texttt{#1}}
\newcommand{\Class}[1]{\@Code{#1}\index{#1@\@Code{#1} class}}

% commands for various weblinks
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\@Software}[1]{\textsf{#1}}
\newcommand{\@Org}[1]{\textsf{#1}}

\newcommand{\FiPy}{\@Software{FiPy}}

\newcommand{\@OrgURL}[2]{\href{#2}{\@Org{#1}}\index{#1@\@Org{#1}}}

\newcommand{\@SoftwareURL}[2]{\href{#2}{\@Software{#1}}\index{#1@\@Software{#1}}}

\newcommand{\SciPy}{\@SoftwareURL{SciPy}{http://www.scipy.org/}}

\newcommand{\PyRex}{\@SoftwareURL{PyRex}{http://www.cosc.canterbury.ac.nz/~greg/python/Pyrex/}}

\newcommand{\Python}{\@SoftwareURL{Python}{http://www.python.org/}}

\newcommand{\Numeric}{\@SoftwareURL{Numeric}{http://www.numpy.org/}}

\newcommand{\PyX}{\@SoftwareURL{PyX}{http://pyx.sourceforge.net/}}

\newcommand{\PyGist}{\@SoftwareURL{PyGist}{http://bonsai.ims.u-tokyo.ac.jp/~mdehoon/software/python/pygist.html}}

\newcommand{\PySparse}{\@SoftwareURL{PySparse}{http://people.web.psi.ch/geus/pyfemax/pysparse.html}}

\newcommand{\ScientificPython}{\@SoftwareURL{Scientific Python}{http://starship.python.net/~hinsen/ScientificPython/}}

\newcommand{\MacOSX}{\@SoftwareURL{Mac OS X}{http://www.apple.com/macosx/}}

\newcommand{\Gmsh}{\@SoftwareURL{Gmsh}{http://www.geuz.org/gmsh/}}

\newcommand{\weave}{\@SoftwareURL{weave}{http://www.scipy.org/documentation/weave/}}

\newcommand{\blitz}{\@SoftwareURL{blitz}{http://www.scipy.org/documentation/weave/}}

\newcommand{\doctest}{\@SoftwareURL{doctest}{http://www.python.org/doc/current/lib/module-doctest.html}}

\newcommand{\unittest}{\@SoftwareURL{unittest}{http://www.python.org/doc/current/lib/module-unittest.html}}

\newcommand{\NIST}{\@OrgURL{NIST}{http://www.nist.gov/}}

\newcommand{\CTCMS}{\@OrgURL{http://www.ctcms.nist.gov/}{\textsf{CTCMS}}}

\newcommand{\MSEL}{\@OrgURL{http://www.msel.nist.gov/}{\textsf{MSEL}}}


% \mod#dofipy.variables.variable.\relax.
% 
% \expandafter\mod@join{fipy (module)}\expandafter\mod@dovariables.variable.\relax.

\renewcommand{\EpydocHyperlink}[2]{\hyperlink{#1}{#2}}
\renewcommand{\EpydocHypertarget}[2]{\label{#1}\hypertarget{#1}{#2}}
% \renewcommand{\EpydocHypertarget}[2]{\hypertarget{#1}{#2}}

% differentiate the appearance of different Index items (somewhat 
% overriden by url.sty-formatted items).
\renewcommand{\EpydocIndex}[2][]{%
%     #2%
    \ifthenelse{\equal{#1}{}}{}{%
        \ifthenelse{\equal{#1}{Method}\OR\equal{#1}{Function}}{%
            #2()%
        }{%
            \ifthenelse{\equal{#1}{Module}\OR\equal{#1}{Package}}{%
                #2}{%
                \ifthenelse{\equal{#1}{Class}}{%
                    \textbf{#2}}{%
                    #2 \textit{(\MakeLowercase{#1})}}}%
        }%
    }%
}

\definecolor{hazy-gray}{gray}{0.96}
\definecolor{light-gray}{gray}{0.8}
\definecolor{middle-gray}{gray}{0.55}
\definecolor{hazy-yellow}{rgb}{1.0,1.0,0.8}
\definecolor{hazy-orange}{rgb}{1.0,0.75,0.4}
\definecolor{hazy-red}{rgb}{1.0,0.8,0.8}

\usepackage{calc}

% lifted from <http://www.texnik.de/color/color.phtml> for colored 
% paragraph boxes
\newcommand{\cmcolor}{}
\newenvironment{cminipage}[1][white]%
  {%\setlength{\fboxsep}{-\fboxrule}
   \renewcommand{\cmcolor}{#1}\noindent%
   \begin{lrbox}{\@tempboxa}%
     \begin{minipage}{\linewidth-2\fboxsep}}%
  {  \end{minipage}%
   \end{lrbox}%
   \colorbox{\cmcolor}{\usebox{\@tempboxa}}}%

% no explicit box around functions, but keep them grouped 
% (we could use a plain minipage)
% \renewenvironment{EpydocFunction}{%
%     \begin{cminipage}}%
%     {\end{cminipage}}

   
\renewenvironment{EpydocFunction}[2]{%
    \renewcommand{\and}{, }%
    \newcommand{\VarArg}[1]{*\textit{##1}}%
    \newcommand{\GenericArg}{\textit{\ldots}}%
    \newcommand{\KWArg}[1]{**\textit{##1}}%
    \newcommand{\Param}[2][]{%
        \textit{##2}%
        \ifthenelse{\equal{##1}{}}{}{=\texttt{##1}}}%
    {\raggedright\Large\hangfrom{\ttfamily #1(}{#2{\ttfamily)}}% 
    \\*[-0.6ex]\rule{\textwidth}{0.5\fboxrule}}%
    \nopagebreak\begin{list}{}{\setlength{\leftmargin}{\parindent}\item{}}}
    {\end{list}}
    
% \newcommand{\@EpydocFunctionSignature}[2]{%
%     \renewcommand{\and}{, }%
%     \newcommand{\VarArg}[1]{*\textit{##1}}%
%     \newcommand{\GenericArg}{\textit{\ldots}}%
%     \newcommand{\KWArg}[1]{**\textit{##1}}%
%     \newcommand{\Param}[2][]{%
%         \textit{##2}%
%         \ifthenelse{\equal{##1}{}}{}{=\texttt{##1}}}%
%     {\Large\raggedright\hangfrom{\ttfamily #1(}#2{\ttfamily)}}% 
%     \\\vspace{-0.6ex}\rule{\textwidth}{0.5\fboxrule}}
% 
% \renewenvironment{EpydocFunction}[2]{%
%     \@EpydocFunctionSignature{#1}{#2}
%     \begin{list}{}{}\item{}}
%     {\end{list}}
       
% format function signatures in large text, with long arguments 
% aligned at open-(, and whole thing underlined to separate from 
% rest of function documentation.
% \renewenvironment{EpydocFunctionSignature}[1]{%
%     \renewcommand{\and}{, }%
%     \newcommand{\VarArg}[1]{*\textit{##1}}%
%     \newcommand{\GenericArg}{\textit{\ldots}}%
%     \newcommand{\KWArg}[1]{**\textit{##1}}%
%     \newcommand{\Param}[2][]{%
%         \textit{##2}%
%         \ifthenelse{\equal{##1}{}}{}{=\texttt{##1}}}%
%     \Large\raggedright\hangfrom{\ttfamily #1(}% 
%     }
%     {{\ttfamily)}\\\vspace{-0.6ex}\rule{\textwidth}{0.5\fboxrule}}

% indent on left
\renewenvironment{EpydocDocstring}{%
    \begin{list}{}{\leftmargin1.5em}\item{}}
    {\end{list}}

% box in gray, indent on left
\renewenvironment{EpydocFunctionParameters}[1]{%
    \vspace{0.4ex}
    \begin{list}{}{\leftmargin1.5em}\item{}%
    \begin{cminipage}[light-gray]\textbf{Parameters}\begin{quote}%
%     \renewcommand*{\descriptionlabel}[1]{\hspace\labelsep
%        \normalfont\bfseries ##1:}
    \renewcommand*{\descriptionlabel}[1]{\hspace\labelsep
       \normalfont\itshape ##1:}
    \begin{description}}
    {\end{description}\end{quote}\end{cminipage}\end{list}}

% indent on left
\renewcommand{\EpydocFunctionOverrides}[2][0]{%
    \begin{list}{}{\leftmargin1.5em}\item{}%
    \raggedright Overrides: #2() %
    \ifthenelse{#1=1}{\textit{(inherited documentation)}}{}%
    \end{list}}

\renewenvironment{EpydocInheritanceList}{%
    \renewcommand*{\descriptionlabel}[1]{\hspace\labelsep
       \normalfont\bfseries Inherited from ##1:}
    \raggedright\begin{description}}
    {\end{description}}

\renewenvironment{EpydocDescriptionShortList}[1]{%
    \renewcommand{\and}{, }%
    \raggedright\begin{description}\item[#1: ]}
    {\end{description}}

\renewenvironment{EpydocModuleList}{%
    \newcommand{\CrossRef}[1]{}
    \begin{itemize}
        \renewcommand{\makelabel}[1]{\textbf{##1}}
        \setlength{\parskip}{0ex}}
    {\end{itemize}}

\renewenvironment{EpydocModuleSubList}{%
    \begin{itemize}
        \renewcommand{\makelabel}[1]{\textbf{##1}}
        \setlength{\parskip}{0ex}}
    {\end{itemize}}

% % % lifted from memoir.cls
% % \newcommand{\hangfrom}[1]{%
% %   \setbox\@tempboxa\hbox{{#1}}%
% %   \hangindent \wd\@tempboxa\noindent\box\@tempboxa}


  
% Same as book.cls, except ragged-right. Looks much better for long 
% module names.
\renewcommand\section{\@startsection {section}{1}{\z@}%
                                   {-3.5ex \@plus -1ex \@minus -.2ex}%
                                   {2.3ex \@plus.2ex}%
                                   {\raggedright\normalfont\Large\bfseries}}
\renewcommand\subsection{\@startsection{subsection}{2}{\z@}%
                                     {-3.25ex\@plus -1ex \@minus -.2ex}%
                                     {1.5ex \@plus .2ex}%
                                     {\raggedright\normalfont\large\bfseries}}
\renewcommand\subsubsection{\@startsection{subsubsection}{3}{\z@}%
                                     {-3.25ex\@plus -1ex \@minus -.2ex}%
                                     {1.5ex \@plus .2ex}%
                                     {\raggedright\normalfont\normalsize\bfseries}}
\renewcommand\paragraph{\@startsection{paragraph}{4}{\z@}%
                                    {3.25ex \@plus1ex \@minus.2ex}%
                                    {-1em}%
                                    {\raggedright\normalfont\normalsize\bfseries}}
\renewcommand\subparagraph{\@startsection{subparagraph}{5}{\parindent}%
                                       {3.25ex \@plus1ex \@minus .2ex}%
                                       {-1em}%
                                      {\raggedright\normalfont\normalsize\bfseries}}

% display style for Python modules. Allows non-hyphenated wrapping at 
% . module separators. Rest is a simplified version of url.sty's tt 
% style.
\RequirePackage{url}
\def\Url@pydo{% style assignments for tt fonts or T1 encoding
\def\UrlBreaks{\do\.\do\]\do\)}%
\def\UrlBigBreaks{\do@url@hyp}%
\def\UrlNoBreaks{\do\(\do\[\do\{\do\<\do\_}% (unnecessary)
\def\UrlSpecials{\do\ {\ }}%
\def\UrlOrds{\do\*\do\-\do\~}% any ordinary characters that aren't usually
}

% \newcommand\capdo[1]{\ifx\capdo#1\else 
%  \do#1{\allowbreak\mathchar`#1} \expandafter\capdo\fi} 
% 
% \def\Url@pydo{% style assignments for tt fonts or T1 encoding 
%  \def\UrlBreaks{\do\.\do\]\do\) }% 
%  \def\UrlBigBreaks{\do@url@hyp} % 
%  \def\UrlNoBreaks{\do\(\do\[\do \{\do\<\do\_}% (unnecessary) 
%  \def\UrlSpecials{\do\ {\ }% 
%   \capdo ABCDEFGHIJKLMNOPQRSTUVWXYZ\capdo}% 
%  \def\UrlOrds{\do\*\do\-\do\~}% 
% } 

\def\url@pystyle{%
\@ifundefined{selectfont}{\def\UrlFont{\tt}}{\def\UrlFont{\ttfamily}}\Url@pydo
}
\newcommand\pymodule{\begingroup \urlstyle{py}\Url}
\renewcommand\EpydocDottedName[1]{\texorpdfstring{\protect\pymodule{#1}}{#1}}

\usepackage{booktabs}

\renewenvironment{reSTadmonition}[1][]{%
    \begin{center}\begin{sffamily}%
    \ifthenelse{\equal{#1}{}\OR\equal{#1}{Note}}{
        \begin{cminipage}[light-gray]
    }{%
        \ifthenelse{\equal{#1}{Warning}}{%
            \begin{cminipage}[hazy-yellow]
        }{%
            \ifthenelse{\equal{#1}{Attention!}}{%
                \begin{cminipage}[hazy-orange]
            }{%
                \ifthenelse{\equal{#1}{Danger}}{%
                    \begin{cminipage}[hazy-red]
                }{%
                    \begin{cminipage}
                }%
            }%
        }%
    }%
    \ifthenelse{\equal{#1}{}}{}{\textbf{\large #1}\vspace{1ex}}%
    \raggedright}
    {\end{cminipage}\end{sffamily}\end{center}}


% don't restart page counter between frontmatter and mainmatter
\renewcommand{\pagenumbering}[1]{%
  \gdef\thepage{\csname @#1\endcsname\c@page}}
  
% blank pages should be BLANK
\let\origdoublepage\cleardoublepage
\newcommand{\clearemptydoublepage}{%
  \clearpage
  {\pagestyle{empty}\origdoublepage}%
}
\let\cleardoublepage\clearemptydoublepage
\let\afterparttoc\clearemptydoublepage

\newenvironment{FiPyDocumentationExample}{
    \renewcommand{\index}[1]{}
    \renewcommand{\@startsection}[6]{%
      \ifraggedbottomsection\if@nobreak\else
        \vskip\z@\@plus\bottomsectionskip
        \penalty\z@
        \vskip\z@\@plus -\bottomsectionskip
      \fi\fi
      \if@noskipsec \leavevmode \fi
      \par
      \@tempskipa ##4\relax
      \@afterindenttrue
      \ifdim \@tempskipa <\z@
        \@tempskipa -\@tempskipa \@afterindentfalse
      \fi
      \if@nobreak
        \everypar{}%
      \else
        \addpenalty\@secpenalty\addvspace\@tempskipa
      \fi
      \@ssect{##3}{##4}{##5}{##6}}
    \begin{framed}
    }{%
    \end{framed}}

    
    
\usepackage{memhfixc}

