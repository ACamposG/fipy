============================
Simple Mac OS X Installation
============================

These instructions are for the `Mac OS X`_ platforms. Please see the more
general |INSTALLATION-txt| for detailed installation instructions. These
instructions are not the only way to set up |FiPy| on `Mac OS X`_ but
represent the most expedient way from our experience to have a usable
installation up and running.

.. include:: utils/include.txt

.. |INSTALLATION-txt| replace:: |htmlINSTALL| |latexINSTALL|
.. _Mac OS X: http://www.nist.gov/cgi-bin/exit_nist.cgi?url=http://www.apple.com/macosx/


Required Packages
=================

Pre-built binaries for many of the required packages are available at 
pythonmac_.

.. _pythonmac: http://www.nist.gov/cgi-bin/exit_nist.cgi?url=http://pythonmac.org/

Python
------

http://pythonmac.org/packages/py24-fat/

Python is pre-installed on `Mac OS X`_, but installation of other packages
is much easier if you upgrade to the latest version of
``Universal-MacPython-2.4.X-XXXX-XX-XX.dmg``. Your existing installation will
not be harmed.

.. note::

   Any command-line instructions that start with ``python`` will either 
   need to be explicitly typed as ``/usr/local/bin/python`` or you will 
   need to adjust your ``$path`` variable so that this version of 
   ``python`` is found before the pre-installed version.

Numeric
-------

http://pythonmac.org/packages/py24-fat/

Download and install the latest version of the 
``Numeric-XX.X-py2.4-macosx10.4.zip``.



matplotlib
----------

http://matplotlib.sourceforge.net/

In order to see simulation results, you will need a viewer. We recommend 
matplotlib_, which has several prerequisites:

NumPy
~~~~~

http://pythonmac.org/packages/py24-fat/

Download and install the latest version of 
``numpy-X.XX-py2.4-macosx10.4.mpkg.zip``.

wxPython
~~~~~~~~

http://pythonmac.org/packages/py24-fat/

Download and install the latest version of
``wxPythonX.X-osx-unicode-X.X.X.X-universal10.4-py2.4.dmg``.

matplotlib
~~~~~~~~~~

http://pythonmac.org/packages/py24-fat/

Now, the actual viewer. Download and install
the latest version of ``matplotlib-X.XX.X-py2.4-macosx10.4.mpkg.zip``. 


Pysparse
--------

http://sourceforge.net/project/showfiles.php?group_id=101403

Download and install the latest version of PySparse for `Mac OS X`_
(``pysparse-x.y.z.macosx10.4-py2.X.zip``). Be sure to select the version
compiled with the correct version of Python to match the pythonmac 
installation.

.. attention::

   Need to provide a Mac OS X installer!!!
   
|FiPy|
------

http://www.ctcms.nist.gov/fipy/download/

Download and unpack the source archive (``FiPy-x.y.tar.gz``). From within 
the |FiPy| directory, execute the command-line instruction::

    $ python setup.py install

Optional Packages
=================

ipython
-------

http://ipython.scipy.org/moin/Download

This interactive Python shell is nicer to use than the default, and 
integrates nicely with matplotlib_. Download the source and follow the 
building and installation instructions for `Mac OS X`_.

Gmsh
----

http://www.geuz.org/gmsh

If you wish to run examples that have unstructured meshes, it is
necessary to install Gmsh. Download and unpack the latest version of
Gmsh for `Mac OS X`. Create a link on your ``$path`` or a shell alias that 
points to ``<Gmsh path>/Gmsh.app/Contents/MacOS/Gmsh``.

.. note::

   This is a required package for superfill examples.

PyVTK
-----

http://www.ctcms.nist.gov/fipy/download/

If you wish to use Mayavi, PyVTK is a requirement.  Download and
install the latest version from the |FiPy| downloads page
(``PyVTK-x.y.z.win32.exe``).

.. note::

   This is a required package for superfill examples.

Mayavi
------

Mayavi comes with Enthought Python, so no installation steps need to
be taken. However, there seems to be a file out of place. In order to
make Mayavi work correctly, open the
``C:\Python2X\Lib\site-packages\vtk_python\`` directory in a browser
and move ``vtkRenderingPythonTkWidgets.dll`` to the ``C:\Python2X\``
directory.

.. note::

   This is a required step for superfill examples.

Using |FiPy| on Mac OS X
========================

We have no experience with using the IDLE_ environment on `Mac OS X`_.

For those that are averse to the Windows command line, the IDLE_
environment is recommended. IDLE_ is packaged with Enthought Python
and will appear in the Windows Program menu after installation.

Interactive Viewing
-------------------

Some versions of Enthought Python have been known to have problems
with interactive viewing. If this turns out to be the case, follow
these instructions:

   - Click on ``Start``
   - Click on ``Programs``
   - Click on ``Python 2.X (Enthought Edition)``
   - Right click on ``IDLE (Python GUI)`` and click on ``Create Shortcut`` which creates ``IDLE (Python GUI)(2)``
   - Right click on ``IDLE (Python GUI)(2)``
   - Click on properties
   - Add the ``-n`` option to ``Target`` being sure to leave a space after the last quote and before ``-n``
   - Drag and drop ``IDLE (Python GUI)(2)`` to the desktop to create an icon.

Import a module and view the results
------------------------------------

You can use the IDLE_ file browser to open the examples and run the
module.

    - Click on ``File``
    - Click on ``Open``
    - Open ``C:\Path\To\Base\FiPy\directory\examples\diffusion\steadyState\mesh50x50\input.py``

This will open an editor, press the F5 key to run the example.
A Matplotlib viewer should appear with rainbow stripes.

Another way to use |FiPy| examples is to import the example file and
then run any functionality it may have. For example at the IDLE_
command line run the following code:

    >>> import sys
    >>> sys.path.append('C://Path//To//Base//FiPy//Directory')
    >>> from examples.levelSet.electroChem.inputGold import runGold
    >>> runGold(numberOfSteps = 100)

If you have installed the optional packages, a MayaVi viewer should
appear with a trench filling simulation.

   .. _IDLE: http://www.nist.gov/cgi-bin/exit_nist.cgi?url=http://www.python.org/idle/

   .. |FiPy| replace:: |htmlFiPy| |latexFiPy|





